<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eterno Calafate</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Lato', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                        display: ['Cinzel', 'serif'],
                    },
                    colors: {
                        ice: {
                            100: '#e0f7fa',
                            300: '#81d4fa',
                            500: '#29b6f6',
                            700: '#0288d1',
                            900: '#01579b',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                        'slide-up': 'slideUp 0.8s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #0f172a;
            color: #f8fafc;
            overflow-x: hidden;
        }
        
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        /* Utility for fade animation on view switch */
        .view-fade-enter {
            animation: fadeIn 0.6s ease-out forwards;
        }
    </style>
</head>
<body class="antialiased selection:bg-ice-500 selection:text-white min-h-screen flex flex-col">

    <!-- WEATHER WIDGET (Fixed Top Right) -->
    <div id="weather-widget" class="fixed top-4 right-4 z-[100] transition-opacity duration-1000 opacity-0">
        <div class="glass-panel rounded-full px-4 py-2 flex items-center gap-3 shadow-lg border border-white/10 bg-slate-900/40 backdrop-blur-md">
            <div id="weather-icon" class="flex items-center justify-center">
                <!-- Icon injected by JS -->
                <i data-lucide="loader" class="w-5 h-5 text-slate-400 animate-spin"></i>
            </div>
            <div class="flex flex-col leading-none">
                <span id="weather-temp" class="text-white font-bold text-sm font-display">--°C</span>
                <span class="text-[10px] text-ice-300 uppercase tracking-wider font-light">El Calafate</span>
            </div>
        </div>
    </div>

    <!-- HOME VIEW (Landing) -->
    <section id="home-view" class="min-h-screen flex flex-col relative overflow-hidden">
        <!-- Background Image with Overlay -->
        <div class="absolute inset-0 z-0">
            <img src="https://i.pinimg.com/1200x/e1/c0/3b/e1c03b768518a80869d8a3853bfe150c.jpg" 
                 alt="Glaciar Perito Moreno" 
                 class="w-full h-full object-cover opacity-50 scale-105 animate-[pulse_15s_ease-in-out_infinite]">
            <div class="absolute inset-0 bg-gradient-to-b from-slate-900/40 via-slate-900/70 to-[#0f172a]"></div>
        </div>

        <!-- Content Container -->
        <div class="relative z-10 flex-grow flex flex-col items-center justify-center px-4 py-8 text-center space-y-6 md:space-y-8 max-w-5xl mx-auto h-full w-full">
            
            <!-- Titles -->
            <div class="animate-slide-up space-y-4">
                <span class="uppercase tracking-[0.4em] text-ice-300 text-xs md:text-sm font-bold block opacity-80">Patagonia Argentina</span>
                <h1 class="font-display text-5xl md:text-7xl lg:text-8xl text-white font-bold leading-none drop-shadow-2xl">
                    El Reino <br/><span class="text-transparent bg-clip-text bg-gradient-to-r from-white to-ice-200">Del Hielo</span>
                </h1>
            </div>

            <!-- Photographer & Team Section -->
            <div class="animate-slide-up bg-slate-900/30 backdrop-blur-sm p-6 rounded-2xl border border-white/5 w-full max-w-lg mx-auto transform transition-all hover:bg-slate-900/40" style="animation-delay: 200ms;">
                
                <!-- Main Photographer: Yamil -->
                <div class="flex flex-col items-center justify-center mb-6">
                    <div class="relative group cursor-pointer mb-3">
                        <div class="w-24 h-24 rounded-full border-2 border-ice-500/30 p-1 bg-white/5 shadow-2xl transition-transform transform group-hover:scale-105">
                            <img src="https://xatimg.com/image/fG8wHl7EDCQS.png" 
                                 alt="Yamil" 
                                 class="w-full h-full rounded-full object-cover">
                        </div>
                        <div class="absolute -bottom-1 -right-1 bg-slate-900 border border-slate-700 rounded-full p-0.5 shadow-lg flex items-center justify-center">
                             <img src="https://png.pngtree.com/png-vector/20221123/ourmid/pngtree-argentina-flag-round-icon-png-image_6477143.png" 
                                  alt="Argentina" 
                                  class="w-6 h-6 rounded-full object-cover">
                        </div>
                    </div>
                    <h3 class="text-white font-display text-2xl tracking-wide">Yamil</h3>
                    <p class="text-ice-300/80 text-xs uppercase tracking-widest font-bold">Director Visual</p>
                </div>

                <!-- Team Network -->
                <div class="border-t border-white/10 pt-4 w-full">
                    <p class="text-slate-400 text-[10px] uppercase tracking-widest mb-3 font-semibold">Equipo Creativo</p>
                    <div class="flex justify-center items-center gap-3">
                        <!-- Gabe -->
                        <a href="https://xat.me/itsGabelico" target="_blank" class="group relative flex flex-col items-center cursor-pointer">
                            <div class="w-10 h-10 rounded-full border border-white/20 overflow-hidden hover:border-ice-400 transition-colors">
                                <img src="https://xat.com/web_gear/chat/av/1557.png" alt="Gabe" class="w-full h-full object-cover opacity-70 group-hover:opacity-100 transition-opacity">
                            </div>
                            <span class="text-[9px] text-slate-400 mt-1 opacity-0 group-hover:opacity-100 transition-opacity absolute -bottom-4">Gabe</span>
                        </a>
                        
                        <!-- Biel -->
                        <a href="https://xat.me/iAddictted" target="_blank" class="group relative flex flex-col items-center cursor-pointer">
                            <div class="w-10 h-10 rounded-full border border-white/20 overflow-hidden hover:border-ice-400 transition-colors">
                                <img src="https://images.weserv.nl/?q=100&url=https%3A%2F%2Fi.ibb.co%2FTbCmfNY%2F71efe96614aad749a7cbabebff0a33285ae15fd3-hq.jpg&default=https://xat.com/content/web/R00231/img/xatspace/default.png" alt="Biel" class="w-full h-full object-cover opacity-70 group-hover:opacity-100 transition-opacity">
                            </div>
                            <span class="text-[9px] text-slate-400 mt-1 opacity-0 group-hover:opacity-100 transition-opacity absolute -bottom-4">Biel</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Action Button -->
            <div class="animate-slide-up pt-4" style="animation-delay: 400ms;">
                <button onclick="switchView('gallery')" 
                        class="group relative px-10 py-4 bg-gradient-to-r from-ice-900 to-slate-900 rounded-full hover:from-ice-700 hover:to-slate-800 transition-all duration-500 shadow-lg hover:shadow-ice-500/20 border border-white/10 flex items-center gap-3 mx-auto cursor-pointer z-50">
                    <span class="font-display text-sm md:text-base tracking-[0.2em] text-white">Explorar Galería</span>
                    <i data-lucide="arrow-right" class="w-4 h-4 text-ice-300 group-hover:translate-x-1 transition-transform"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- GALLERY VIEW -->
    <section id="gallery-view" class="hidden min-h-screen bg-slate-900 w-full">
        <!-- Gallery Header -->
        <div class="bg-slate-900/90 backdrop-blur-md sticky top-0 z-30 border-b border-white/5 shadow-2xl">
            <div class="container mx-auto px-4 py-4 flex items-center justify-between">
                <button onclick="switchView('home')" class="flex items-center gap-2 text-slate-400 hover:text-white transition-colors group">
                    <i data-lucide="arrow-left" class="w-5 h-5 group-hover:-translate-x-1 transition-transform"></i>
                    <span class="font-display text-sm tracking-wider">Volver</span>
                </button>
                <h2 class="font-display text-xl text-white tracking-widest hidden md:block">Apreciá La Patagonia</h2>
                <span class="md:hidden font-display text-xl text-white">Eterno</span>
                <!-- Spacer div to balance header layout, taking up space on the right where widget is fixed -->
                <div class="w-20"></div> 
            </div>
        </div>

        <!-- Main Gallery Content -->
        <!-- Added pt-4 to ensure content is near the top but not under header -->
        <main class="container mx-auto px-4 pt-6 pb-20">
            <!-- Photo Grid -->
            <!-- Changed grid columns to make items smaller: 2 cols on mobile, 3 on md, 4 on lg -->
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="photo-grid">
                <!-- Grid items injected by JS -->
            </div>
        </main>

        <footer class="border-t border-slate-800 py-12 text-center text-slate-500 bg-slate-950">
            <p class="font-serif italic mb-4">"El sur también existe."</p>
        </footer>
    </section>

    <!-- Fullscreen Modal (Lightbox) -->
    <div id="modal" class="fixed inset-0 z-[200] hidden opacity-0 transition-opacity duration-300" aria-modal="true">
        <div class="absolute inset-0 bg-slate-950/95 backdrop-blur-sm" onclick="closeModal()"></div>
        
        <div class="relative h-full w-full flex items-center justify-center p-4 md:p-8">
            <button onclick="closeModal()" class="absolute top-6 right-6 z-50 text-white/50 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-full">
                <i data-lucide="x" class="w-8 h-8"></i>
            </button>

            <div class="flex flex-col lg:flex-row w-full max-w-7xl h-[85vh] bg-slate-900/50 rounded-2xl overflow-hidden shadow-2xl border border-slate-700/50">
                <div class="w-full lg:w-2/3 h-1/2 lg:h-full relative bg-black flex items-center justify-center group">
                    <img id="modal-img" src="" alt="" class="max-h-full max-w-full object-contain shadow-2xl">
                    <div class="absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <span class="text-xs text-white/50 bg-black/50 px-2 py-1 rounded">Click derecho para guardar</span>
                    </div>
                </div>

                <div class="w-full lg:w-1/3 h-1/2 lg:h-full glass-panel p-8 lg:p-12 flex flex-col justify-center overflow-y-auto hide-scrollbar">
                    <div class="mb-8">
                        <span id="modal-location" class="uppercase tracking-widest text-ice-500 text-xs font-bold mb-3 flex items-center gap-2">
                            <i data-lucide="map-pin" class="w-3 h-3"></i> 
                            <span>Ubicación</span>
                        </span>
                        <h3 id="modal-title" class="font-display text-3xl md:text-4xl text-white leading-tight mb-4">Título Foto</h3>
                        <div class="w-12 h-1 bg-ice-500 rounded-full mb-6"></div>
                        <p id="modal-desc" class="text-slate-300 font-light leading-relaxed text-lg mb-8">
                            Descripción de la fotografía...
                        </p>
                    </div>

                    <div class="mt-auto border-t border-white/10 pt-6">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-full bg-gradient-to-tr from-ice-700 to-slate-600 flex items-center justify-center text-white font-bold text-xl font-display shadow-lg">
                                <span id="photographer-initial">Y</span>
                            </div>
                            <div>
                                <p class="text-xs text-slate-400 uppercase tracking-wide mb-0.5">Fotografía por</p>
                                <p id="modal-photographer" class="text-white font-serif italic text-xl">Yamil</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- Weather Widget Logic ---
        async function fetchWeather() {
            const widget = document.getElementById('weather-widget');
            const iconContainer = document.getElementById('weather-icon');
            const tempElement = document.getElementById('weather-temp');
            
            // Coordinates for El Calafate
            const lat = -50.338;
            const lon = -72.266;

            try {
                const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
                if (!response.ok) throw new Error('Weather API error');
                
                const data = await response.json();
                const weather = data.current_weather;
                const code = weather.weathercode;
                const temp = Math.round(weather.temperature);

                let iconName = 'sun';
                let colorClass = 'text-yellow-400';
                
                // Weather Code Interpretation (Visual Logic)
                if (code === 0) {
                    iconName = 'sun';
                    colorClass = 'text-yellow-400'; // Sunny
                } else if (code >= 1 && code <= 3) {
                    iconName = 'cloud-sun';
                    colorClass = 'text-ice-100'; // Partly cloudy
                } else if (code >= 45 && code <= 48) {
                    iconName = 'cloud-fog';
                    colorClass = 'text-slate-400'; // Fog
                } else if ((code >= 51 && code <= 67) || (code >= 80 && code <= 82)) {
                    iconName = 'cloud-rain';
                    colorClass = 'text-slate-500'; // Rain (Grey Cloud as requested)
                } else if ((code >= 71 && code <= 77) || (code >= 85 && code <= 86)) {
                    iconName = 'snowflake';
                    colorClass = 'text-white'; // Snow
                } else if (code >= 95 && code <= 99) {
                    iconName = 'cloud-lightning';
                    colorClass = 'text-purple-400'; // Thunder
                }

                // Update DOM
                iconContainer.innerHTML = `<i data-lucide="${iconName}" class="w-6 h-6 ${colorClass}"></i>`;
                tempElement.innerText = `${temp}°C`;
                
                // Refresh icons
                lucide.createIcons();
                
                // Show widget
                widget.classList.remove('opacity-0');

            } catch (e) {
                console.error("Could not fetch weather data", e);
                // Optionally hide widget or show error state, but failing silently keeps design clean
            }
        }

        // Initialize Weather on Load
        window.addEventListener('load', fetchWeather);

        // --- Robust View Switching Logic ---
        function switchView(viewName) {
            const home = document.getElementById('home-view');
            const gallery = document.getElementById('gallery-view');
            
            // 1. Force scroll to top immediately to prevent "blue space" issue
            window.scrollTo({ top: 0, behavior: 'instant' });

            if (viewName === 'gallery') {
                // 2. Use display:none logic (hidden class) for reliable layout changes
                home.classList.add('hidden');
                gallery.classList.remove('hidden');
                
                // 3. Add fade animation to entry
                gallery.classList.add('view-fade-enter');
                
                // 4. Force scroll again just in case DOM repaint lagged
                setTimeout(() => window.scrollTo(0, 0), 0);

            } else {
                gallery.classList.add('hidden');
                home.classList.remove('hidden');
                home.classList.add('view-fade-enter');
                setTimeout(() => window.scrollTo(0, 0), 0);
            }
        }

        // --- Data & Gallery Logic ---
        const galleryData = [
            {
                id: 1,
                url: 'https://xatimg.com/image/lvdtHvH7yQoL.jpg',
                title: 'Muralla Azul',
                photographer: 'Yamil',
                location: 'Glaciar Perito Moreno',
                description: 'La inmensidad del frente del glaciar, donde el hielo compactado durante milenios adquiere tonalidades azules profundas imposibles de replicar. Un recordatorio silencioso de la antigüedad de la Tierra.',
                camera: 'Canon R5',
                aperture: 'f/11'
            },
            {
                id: 2,
                url: 'https://xatimg.com/image/NUA2tS6MaCrw.jpg',
                title: 'Sendero al Fitz Roy',
                photographer: 'Equipo #2',
                location: 'El Chaltén / Calafate Region',
                description: 'Aunque técnicamente en El Chaltén, este pico icónico es la joya de la corona para cualquier viajero que aterriza en Calafate.',
                camera: 'Nikon Z7',
                aperture: 'f/5.6'
            },
            {
                id: 3,
                url: 'https://xatimg.com/image/kMTe8irlyDJ7.jpg',
                title: 'Caverna de Cristal',
                photographer: 'Equipo #3',
                location: 'Lago Argentino',
                description: 'Explorando el interior de un iceberg desprendido. La luz del sol se filtra a través de las paredes translúcidas.',
                camera: 'Sony A7S III',
                aperture: 'f/2.8'
            },
            {
                id: 4,
                url: 'https://xatimg.com/image/7dFPVJJruhbZ.jpg',
                title: 'Reflejos del Sur',
                photographer: 'Yamil',
                location: 'Brazo Rico',
                description: 'Un día de calma absoluta permite que las montañas nevadas se miren en el espejo del lago.',
                camera: 'Fujifilm X-T4',
                aperture: 'f/16'
            },
            {
                id: 5,
                url: 'https://xatimg.com/image/VNSPj9jkJlLu.jpg',
                title: 'Horizonte Infinito',
                photographer: 'Equipo #1',
                location: 'Estepa Patagónica',
                description: 'La vastedad de la estepa patagónica donde el cielo y la tierra se encuentran en un abrazo eterno. Colores cálidos que contrastan con el hielo eterno.',
                camera: 'Sony A7R IV',
                aperture: 'f/8'
            }
        ];

        lucide.createIcons();

        function renderGallery() {
            const grid = document.getElementById('photo-grid');
            if(grid.children.length > 0) return; // Prevent duplicate render

            galleryData.forEach((photo, index) => {
                const card = document.createElement('div');
                // Removed opacity-0 to ensure visibility immediately upon rendering in the new view
                card.className = `group relative overflow-hidden rounded-xl cursor-pointer shadow-lg transform transition-all duration-500 hover:-translate-y-2 hover:shadow-ice-500/20 hover:shadow-xl animate-[slideUp_0.8s_ease-out_forwards]`;
                card.style.animationDelay = `${index * 100}ms`; // Faster stagger for more items
                card.onclick = () => openModal(photo);

                // Adjusted padding (p-4) and text sizes (text-lg) for smaller cards
                card.innerHTML = `
                    <div class="aspect-[3/4] w-full bg-slate-800 relative overflow-hidden">
                        <img src="${photo.url}" alt="${photo.title}" 
                             class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-90 group-hover:opacity-100 group-hover:brightness-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-950 via-transparent to-transparent opacity-60 group-hover:opacity-90 transition-opacity"></div>
                        
                        <div class="absolute bottom-0 left-0 p-4 translate-y-2 group-hover:translate-y-0 transition-transform duration-300 w-full">
                            <p class="text-ice-300 text-[10px] font-bold tracking-widest uppercase mb-1 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity delay-100">
                                <i data-lucide="map-pin" class="w-3 h-3"></i> <span class="truncate">${photo.location}</span>
                            </p>
                            <h3 class="text-lg md:text-xl font-display text-white mb-0.5 leading-tight group-hover:text-ice-100 transition-colors">${photo.title}</h3>
                            <p class="text-slate-400 text-xs font-serif italic opacity-80">por ${photo.photographer}</p>
                        </div>
                        
                        <!-- Interactive Hint Icon -->
                        <div class="absolute top-2 right-2 bg-black/20 backdrop-blur-md p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-300 scale-75 group-hover:scale-100">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h6v6"/><path d="M10 14 21 3"/><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/></svg>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
            lucide.createIcons();
        }

        // Initialize
        renderGallery();

        // Modal Logic
        const modal = document.getElementById('modal');

        function openModal(photo) {
            document.getElementById('modal-img').src = photo.url;
            document.getElementById('modal-title').innerText = photo.title;
            document.getElementById('modal-desc').innerText = photo.description;
            document.getElementById('modal-photographer').innerText = photo.photographer;
            document.getElementById('modal-location').innerHTML = `<i data-lucide="map-pin" class="w-3 h-3 mr-2"></i> ${photo.location}`;
            document.getElementById('photographer-initial').innerText = photo.photographer.charAt(0);
            lucide.createIcons();

            modal.classList.remove('hidden');
            requestAnimationFrame(() => modal.classList.remove('opacity-0'));
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            modal.classList.add('opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            }, 300);
        }
        
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !modal.classList.contains('hidden')) closeModal();
        });
    </script>
</body>
</html>
