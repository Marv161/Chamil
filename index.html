<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yamil</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Lato', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                        display: ['Cinzel', 'serif'],
                    },
                    colors: {
                        ice: {
                            100: '#e0f7fa',
                            300: '#81d4fa',
                            500: '#29b6f6',
                            700: '#0288d1',
                            900: '#01579b',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                        'slide-up': 'slideUp 0.8s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #0f172a;
            color: #f8fafc;
            overflow-x: hidden;
            user-select: none; /* CSS Select Disable */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        /* Prevent image dragging and selection globally */
        img {
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -o-user-select: none;
            user-select: none;
            pointer-events: none; /* Prevents interactions like drag */
            pointer-events: auto; /* Re-enables clicks */
        }
        
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .view-fade-enter {
            animation: fadeIn 0.6s ease-out forwards;
        }

        /* --- Efecto de Texto Avanzado (Tipo Xat) --- */
        .text-effect-xat {
            background: linear-gradient(
                18deg, 
                #010101 0%, 
                #010101 20%, 
                #010101 40%, 
                #010101 45%, 
                #ffffff 55%, 
                #ffffff 60%, 
                #ffffff 80%, 
                #ffffff 100%
            );
            background-size: 300% 300%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: xatGradientMove 4s ease infinite alternate;
            filter: drop-shadow(0 0 2px rgba(255,255,255,0.2));
        }

        @keyframes xatGradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- Borde Rotativo Celeste --- */
        @keyframes rotateCeleste {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .rotating-border-celeste {
            position: relative;
            overflow: hidden;
            border-radius: 9999px;
            padding: 3px; 
            background: #0f172a; 
            box-shadow: 0 0 15px rgba(129, 212, 250, 0.3); 
        }

        .rotating-border-celeste::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(
                from 0deg, 
                transparent 0%, 
                transparent 40%, 
                #0288d1 50%, 
                #81d4fa 75%, 
                #0288d1 90%, 
                transparent 100%
            );
            animation: rotateCeleste 3s linear infinite;
            z-index: 0;
        }

        .rotating-border-celeste img {
            position: relative;
            z-index: 1; 
            border-radius: 9999px;
            background-color: #0f172a; 
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* --- Estilos para los Puntos de Estado --- */
        .status-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            border: 2px solid #0f172a; 
            background-color: #64748b; 
            box-shadow: 0 0 5px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
        }
        .status-online {
            background-color: #22c55e !important; 
            box-shadow: 0 0 8px #22c55e;
        }
        .status-offline {
            background-color: #ef4444 !important; 
        }
    </style>
</head>
<body class="antialiased selection:bg-ice-500 selection:text-white min-h-screen flex flex-col" oncontextmenu="return false;" ondragstart="return false;" onselectstart="return false;">

    <!-- WEATHER WIDGET (Fixed Top Right) -->
    <!-- Mantenido top-4 right-4 pero con z-index muy alto para asegurar visibilidad -->
    <div id="weather-widget" class="fixed top-4 right-4 z-[100] transition-opacity duration-1000 opacity-0 pointer-events-none md:pointer-events-auto">
        <div class="glass-panel rounded-full px-4 py-2 flex items-center gap-3 shadow-lg border border-white/10 bg-slate-900/40 backdrop-blur-md">
            <div id="weather-icon" class="flex items-center justify-center">
                <i data-lucide="loader" class="w-5 h-5 text-slate-400 animate-spin"></i>
            </div>
            <div class="flex flex-col leading-none">
                <span id="weather-temp" class="text-white font-bold text-sm font-display">--°C</span>
                <span class="text-[10px] text-ice-300 uppercase tracking-wider font-light">El Calafate</span>
            </div>
        </div>
    </div>

    <!-- HOME VIEW (Landing) -->
    <section id="home-view" class="min-h-screen flex flex-col relative overflow-hidden">
        <!-- Background Image with Overlay -->
        <div class="absolute inset-0 z-0">
            <img src="https://i.pinimg.com/1200x/e1/c0/3b/e1c03b768518a80869d8a3853bfe150c.jpg" 
                 alt="Glaciar Perito Moreno" 
                 class="w-full h-full object-cover opacity-50 scale-105 animate-[pulse_15s_ease-in-out_infinite]">
            <div class="absolute inset-0 bg-gradient-to-b from-slate-900/40 via-slate-900/70 to-[#0f172a]"></div>
        </div>

        <!-- Content Container -->
        <div class="relative z-10 flex-grow flex flex-col items-center justify-center px-4 py-8 text-center space-y-6 md:space-y-8 max-w-5xl mx-auto h-full w-full">
            
            <!-- Titles -->
            <div class="animate-slide-up space-y-4">
                <span class="uppercase tracking-[0.4em] text-ice-300 text-xs md:text-sm font-bold block opacity-80">Patagonia Argentina</span>
                <h1 class="font-display text-5xl md:text-7xl lg:text-8xl font-bold leading-none drop-shadow-2xl text-effect-xat">
                    El Reino <br/>Del Hielo
                </h1>
            </div>

            <!-- Photographer & Team Section -->
            <div class="animate-slide-up bg-slate-900/30 backdrop-blur-sm p-6 rounded-2xl border border-white/5 w-full max-w-lg mx-auto transform transition-all hover:bg-slate-900/40" style="animation-delay: 200ms;">
                
                <!-- Main Photographer: Yamil -->
                <div class="flex flex-col items-center justify-center mb-6">
                    <div class="relative group cursor-pointer mb-3">
                        <div class="w-28 h-28 rotating-border-celeste shadow-2xl transition-transform transform group-hover:scale-105 relative">
                            <img src="https://xatimg.com/image/fG8wHl7EDCQS.png" 
                                 alt="Yamil" 
                                 class="w-full h-full rounded-full object-cover">
                        </div>
                        
                        <div class="absolute bottom-1 left-1 bg-slate-900 border border-slate-700 rounded-full p-0.5 shadow-lg flex items-center justify-center z-20">
                             <img src="https://png.pngtree.com/png-vector/20221123/ourmid/pngtree-argentina-flag-round-icon-png-image_6477143.png" 
                                  alt="Argentina" 
                                  class="w-5 h-5 rounded-full object-cover">
                        </div>

                        <div id="status-yamil" class="status-dot absolute bottom-2 right-2 z-20" title="Estado de Conexión"></div>
                    </div>
                    <h3 class="text-white font-display text-2xl tracking-wide">Yamil</h3>
                    <p class="text-ice-300/80 text-xs uppercase tracking-widest font-bold">Director Visual</p>
                </div>

                <!-- Team Network -->
                <div class="border-t border-white/10 pt-4 w-full">
                    <p class="text-slate-400 text-[10px] uppercase tracking-widest mb-3 font-semibold">Equipo Creativo</p>
                    <div class="flex justify-center items-center gap-6">
                        
                        <!-- Gabe -->
                        <div class="relative">
                            <a href="https://xat.me/itsGabelico" target="_blank" class="group relative flex flex-col items-center cursor-pointer">
                                <div class="w-14 h-14 rotating-border-celeste transition-colors">
                                    <img src="https://xat.com/web_gear/chat/av/1557.png" alt="Gabe" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity">
                                </div>
                                <span class="text-[9px] text-slate-400 mt-1 opacity-0 group-hover:opacity-100 transition-opacity absolute -bottom-4">Gabe</span>
                            </a>
                            <div id="status-gabe" class="status-dot absolute bottom-3 -right-1 z-10 pointer-events-none"></div>
                        </div>
                        
                        <!-- Biel -->
                        <div class="relative">
                            <a href="https://xat.me/iAddictted" target="_blank" class="group relative flex flex-col items-center cursor-pointer">
                                <div class="w-14 h-14 rotating-border-celeste transition-colors">
                                    <img src="https://images.weserv.nl/?q=100&url=https%3A%2F%2Fi.ibb.co%2FTbCmfNY%2F71efe96614aad749a7cbabebff0a33285ae15fd3-hq.jpg&default=https://xat.com/content/web/R00231/img/xatspace/default.png" alt="Biel" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity">
                                </div>
                                <span class="text-[9px] text-slate-400 mt-1 opacity-0 group-hover:opacity-100 transition-opacity absolute -bottom-4">Biel</span>
                            </a>
                            <div id="status-biel" class="status-dot absolute bottom-3 -right-1 z-10 pointer-events-none"></div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Action Button -->
            <div class="animate-slide-up pt-4" style="animation-delay: 400ms;">
                <button onclick="switchView('gallery')" 
                        class="group relative px-10 py-4 bg-gradient-to-r from-ice-900 to-slate-900 rounded-full hover:from-ice-700 hover:to-slate-800 transition-all duration-500 shadow-lg hover:shadow-ice-500/20 border border-white/10 flex items-center gap-3 mx-auto cursor-pointer z-50">
                    <span class="font-display text-sm md:text-base tracking-[0.2em] text-white">Explorar Galería</span>
                    <i data-lucide="arrow-right" class="w-4 h-4 text-ice-300 group-hover:translate-x-1 transition-transform"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- GALLERY VIEW -->
    <section id="gallery-view" class="hidden min-h-screen bg-slate-900 w-full pt-20"> <!-- Added pt-20 for top spacing -->
        
        <!-- Navbar / Back Button Area (Not Sticky anymore) -->
        <div class="container mx-auto px-4 mb-8 flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
            
            <!-- Botón Volver (Ahora con mt-4 para bajarlo) -->
            <button onclick="switchView('home')" class="flex items-center gap-2 text-slate-400 hover:text-white transition-colors group bg-slate-900/50 px-4 py-2 rounded-full border border-white/10 mt-4 backdrop-blur-sm shadow-xl">
                <i data-lucide="arrow-left" class="w-5 h-5 group-hover:-translate-x-1 transition-transform"></i>
                <span class="font-display text-sm tracking-wider">Volver al Inicio</span>
            </button>

            <!-- Título de Sección -->
            <div class="flex items-center gap-4">
                <div class="h-[1px] w-12 bg-ice-500/50 hidden md:block"></div>
                <h2 class="font-display text-2xl text-white tracking-widest text-effect-xat">Apreciá La Patagonia</h2>
                <div class="h-[1px] w-12 bg-ice-500/50 hidden md:block"></div>
            </div>
            
        </div>

        <!-- Main Gallery Content -->
        <main class="container mx-auto px-4 pb-20">
            <!-- Photo Grid -->
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="photo-grid">
                <!-- Grid items injected by JS -->
            </div>
        </main>

        <footer class="border-t border-slate-800 py-12 text-center text-slate-500 bg-slate-950">
            <p class="font-serif italic mb-4">"El sur también existe."</p>
        </footer>
    </section>

    <!-- Fullscreen Modal (Lightbox) -->
    <div id="modal" class="fixed inset-0 z-[200] hidden opacity-0 transition-opacity duration-300" aria-modal="true">
        <!-- Backdrop with click to close -->
        <div class="absolute inset-0 bg-slate-950/95 backdrop-blur-sm cursor-pointer" onclick="closeModal()"></div>
        
        <div class="relative h-full w-full flex items-center justify-center p-4 md:p-8 pointer-events-none">
            
            <!-- Close Button (Moved Down significantly: top-20) -->
            <button onclick="closeModal()" class="absolute top-20 right-6 z-[250] text-white/50 hover:text-white transition-colors p-3 hover:bg-white/10 rounded-full bg-black/20 backdrop-blur-md pointer-events-auto border border-white/5">
                <i data-lucide="x" class="w-8 h-8"></i>
            </button>

            <!-- Content Container -->
            <div class="flex flex-col lg:flex-row w-full max-w-7xl h-[75vh] md:h-[85vh] bg-slate-900/50 rounded-2xl overflow-hidden shadow-2xl border border-slate-700/50 pointer-events-auto relative mt-12 md:mt-0">
                <div class="w-full lg:w-2/3 h-1/2 lg:h-full relative bg-black flex items-center justify-center group">
                    <img id="modal-img" src="" alt="" class="max-h-full max-w-full object-contain shadow-2xl">
                    <div class="absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <span class="text-xs text-white/50 bg-black/50 px-2 py-1 rounded">Protegido por Yamil</span>
                    </div>
                </div>

                <div class="w-full lg:w-1/3 h-1/2 lg:h-full glass-panel p-8 lg:p-12 flex flex-col justify-center overflow-y-auto hide-scrollbar">
                    <div class="mb-8">
                        <span id="modal-location" class="uppercase tracking-widest text-ice-500 text-xs font-bold mb-3 flex items-center gap-2">
                            <i data-lucide="map-pin" class="w-3 h-3"></i> 
                            <span>Ubicación</span>
                        </span>
                        <h3 id="modal-title" class="font-display text-3xl md:text-4xl text-white leading-tight mb-4">Título Foto</h3>
                        <div class="w-12 h-1 bg-ice-500 rounded-full mb-6"></div>
                        <p id="modal-desc" class="text-slate-300 font-light leading-relaxed text-lg mb-8">
                            Descripción de la fotografía...
                        </p>
                    </div>

                    <div class="mt-auto border-t border-white/10 pt-6">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-full bg-gradient-to-tr from-ice-700 to-slate-600 flex items-center justify-center text-white font-bold text-xl font-display shadow-lg">
                                <span id="photographer-initial">Y</span>
                            </div>
                            <div>
                                <p class="text-xs text-slate-400 uppercase tracking-wide mb-0.5">Fotografía por</p>
                                <p id="modal-photographer" class="text-white font-serif italic text-xl">Yamil</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- Security Measures (No Right Click, No F12/Ctrl+U) ---
        document.addEventListener('keydown', function(e) {
            // Block F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U, Ctrl+S
            if (
                e.key === 'F12' ||
                (e.ctrlKey && e.shiftKey && e.key === 'I') ||
                (e.ctrlKey && e.shiftKey && e.key === 'J') ||
                (e.ctrlKey && e.key === 'u') ||
                (e.ctrlKey && e.key === 'U') ||
                (e.ctrlKey && e.key === 's') ||
                (e.ctrlKey && e.key === 'S')
            ) {
                e.preventDefault();
                return false;
            }
        });

        // --- API Connection Status Logic ---
        async function checkStatus(user, elementId) {
            const el = document.getElementById(elementId);
            if (!el) return;
            try {
                const r = await fetch(`https://illuxat.com/api/online/${user}`);
                if (!r.ok) throw new Error();
                const d = await r.json();
                const isOnline = d.data?.status?.toLowerCase() === 'online';
                el.classList.remove('status-online', 'status-offline');
                el.classList.add(isOnline ? 'status-online' : 'status-offline');
                el.title = isOnline ? `${user} está conectado` : `${user} está desconectado`;
            } catch(e) { 
                console.error(`Error checking status for ${user}`, e);
                el.classList.remove('status-online', 'status-offline');
                el.classList.add('status-offline'); 
            }
        }

        function updateAllStatuses() {
            checkStatus('YaamilFederico', 'status-yamil');
            checkStatus('itsGabelico', 'status-gabe');
            checkStatus('iAddictted', 'status-biel');
        }

        // --- Weather Widget Logic ---
        async function fetchWeather() {
            const widget = document.getElementById('weather-widget');
            const iconContainer = document.getElementById('weather-icon');
            const tempElement = document.getElementById('weather-temp');
            const lat = -50.338;
            const lon = -72.266;

            try {
                const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
                if (!response.ok) throw new Error('Weather API error');
                const data = await response.json();
                const weather = data.current_weather;
                const code = weather.weathercode;
                const temp = Math.round(weather.temperature);
                let iconName = 'sun';
                let colorClass = 'text-yellow-400';
                
                if (code === 0) { iconName = 'sun'; colorClass = 'text-yellow-400'; } 
                else if (code >= 1 && code <= 3) { iconName = 'cloud-sun'; colorClass = 'text-ice-100'; } 
                else if (code >= 45 && code <= 48) { iconName = 'cloud-fog'; colorClass = 'text-slate-400'; } 
                else if ((code >= 51 && code <= 67) || (code >= 80 && code <= 82)) { iconName = 'cloud-rain'; colorClass = 'text-slate-500'; } 
                else if ((code >= 71 && code <= 77) || (code >= 85 && code <= 86)) { iconName = 'snowflake'; colorClass = 'text-white'; } 
                else if (code >= 95 && code <= 99) { iconName = 'cloud-lightning'; colorClass = 'text-purple-400'; }

                iconContainer.innerHTML = `<i data-lucide="${iconName}" class="w-6 h-6 ${colorClass}"></i>`;
                tempElement.innerText = `${temp}°C`;
                lucide.createIcons();
                widget.classList.remove('opacity-0');
            } catch (e) { console.error("Could not fetch weather data", e); }
        }

        // --- View Switching Logic ---
        function switchView(viewName) {
            const home = document.getElementById('home-view');
            const gallery = document.getElementById('gallery-view');
            window.scrollTo({ top: 0, behavior: 'instant' });

            if (viewName === 'gallery') {
                home.classList.add('hidden');
                gallery.classList.remove('hidden');
                gallery.classList.add('view-fade-enter');
                setTimeout(() => window.scrollTo(0, 0), 0);
            } else {
                gallery.classList.add('hidden');
                home.classList.remove('hidden');
                home.classList.add('view-fade-enter');
                setTimeout(() => window.scrollTo(0, 0), 0);
            }
        }

        // --- Data & Gallery Logic ---
        const galleryData = [
            {
                id: 1,
                url: 'https://xatimg.com/image/lvdtHvH7yQoL.jpg',
                title: 'Muralla Azul',
                photographer: 'Yamil',
                location: 'Glaciar Perito Moreno',
                description: 'La inmensidad del frente del glaciar, donde el hielo compactado durante milenios adquiere tonalidades azules profundas imposibles de replicar.',
                camera: 'Canon R5',
                aperture: 'f/11'
            },
            {
                id: 2,
                url: 'https://xatimg.com/image/NUA2tS6MaCrw.jpg',
                title: 'Sendero al Fitz Roy',
                photographer: 'Yamil',
                location: 'El Chaltén',
                description: 'Aunque técnicamente en El Chaltén, este pico icónico es la joya de la corona para cualquier viajero.',
                camera: 'Nikon Z7',
                aperture: 'f/5.6'
            },
            {
                id: 3,
                url: 'https://xatimg.com/image/kMTe8irlyDJ7.jpg',
                title: 'Caverna de Cristal',
                photographer: 'Yamil',
                location: 'Lago Argentino',
                description: 'Explorando el interior de un iceberg desprendido. La luz del sol se filtra a través de las paredes translúcidas.',
                camera: 'Sony A7S III',
                aperture: 'f/2.8'
            },
            {
                id: 4,
                url: 'https://xatimg.com/image/7dFPVJJruhbZ.jpg',
                title: 'Reflejos del Sur',
                photographer: 'Yamil',
                location: 'Brazo Rico',
                description: 'Un día de calma absoluta permite que las montañas nevadas se miren en el espejo del lago.',
                camera: 'Fujifilm X-T4',
                aperture: 'f/16'
            },
            {
                id: 5,
                url: 'https://xatimg.com/image/VNSPj9jkJlLu.jpg',
                title: 'Horizonte Infinito',
                photographer: 'Yamil',
                location: 'Estepa Patagónica',
                description: 'La vastedad de la estepa patagónica donde el cielo y la tierra se encuentran en un abrazo eterno.',
                camera: 'Sony A7R IV',
                aperture: 'f/8'
            }
        ];

        function renderGallery() {
            const grid = document.getElementById('photo-grid');
            if(grid.children.length > 0) return;

            galleryData.forEach((photo, index) => {
                const card = document.createElement('div');
                card.className = `group relative overflow-hidden rounded-xl cursor-pointer shadow-lg transform transition-all duration-500 hover:-translate-y-2 hover:shadow-ice-500/20 hover:shadow-xl animate-[slideUp_0.8s_ease-out_forwards]`;
                card.style.animationDelay = `${index * 100}ms`;
                card.onclick = () => openModal(photo);

                card.innerHTML = `
                    <div class="aspect-[3/4] w-full bg-slate-800 relative overflow-hidden">
                        <img src="${photo.url}" alt="${photo.title}" 
                             class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-90 group-hover:opacity-100 group-hover:brightness-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-950 via-transparent to-transparent opacity-60 group-hover:opacity-90 transition-opacity"></div>
                        <div class="absolute bottom-0 left-0 p-4 translate-y-2 group-hover:translate-y-0 transition-transform duration-300 w-full">
                            <p class="text-ice-300 text-[10px] font-bold tracking-widest uppercase mb-1 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity delay-100">
                                <i data-lucide="map-pin" class="w-3 h-3"></i> <span class="truncate">${photo.location}</span>
                            </p>
                            <h3 class="text-lg md:text-xl font-display text-white mb-0.5 leading-tight group-hover:text-ice-100 transition-colors">${photo.title}</h3>
                            <p class="text-slate-400 text-xs font-serif italic opacity-80">por ${photo.photographer}</p>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
            lucide.createIcons();
        }

        // --- Modal Logic Improved ---
        const modal = document.getElementById('modal');

        function openModal(photo) {
            document.getElementById('modal-img').src = photo.url;
            document.getElementById('modal-title').innerText = photo.title;
            document.getElementById('modal-desc').innerText = photo.description;
            document.getElementById('modal-photographer').innerText = photo.photographer;
            document.getElementById('modal-location').innerHTML = `<i data-lucide="map-pin" class="w-3 h-3 mr-2"></i> ${photo.location}`;
            document.getElementById('photographer-initial').innerText = photo.photographer.charAt(0);
            lucide.createIcons();

            modal.classList.remove('hidden');
            requestAnimationFrame(() => modal.classList.remove('opacity-0'));
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            modal.classList.add('opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            }, 300);
        }
        
        // Escape key to close modal
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
                closeModal();
            }
        });

        // Initialize Everything
        window.addEventListener('load', () => {
            fetchWeather();
            renderGallery();
            updateAllStatuses();
            setInterval(updateAllStatuses, 60000);
        });
    </script>
</body>
</html>
